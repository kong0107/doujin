<h2>自訂契約</h2>

<section [class.selected]="!setting.category.display">
    <h3>契約類型</h3>
    <div *ngIf="setting.category.display">
        <fieldset>
            <legend><h3>非出版性委託</h3></legend>
            <button class="btn btn-default" (click)="set({category: '設定圖'})">設定圖</button>
            <button (click)="set({category: '非出版單張'})">單張圖</button>
        </fieldset>
        <fieldset>
            <legend><h3>出版性委託</h3></legend>
            <button (click)="set({category: '出版插圖'})">插圖</button>
            <button (click)="set({category: '合本'})">多人合本</button>
        </fieldset>
    </div>
    <div *ngIf="!setting.category.display">
        {{setting.category.value}}
        <span class="clickable glyphicon glyphicon-pencil" (click)="setting.category.display=true"></span>
    </div>
</section>

<!--section id="contractCategory">
    <h3>契約類型</h3>
    <div *ngIf="!contract.category || showSetting.category">
        <fieldset>
            <legend><h3>非出版性委託</h3></legend>
            <div>
                <label>
                    <input type="radio" [(ngModel)]="contract.category" value="設定圖">
                    設定圖
                </label>
            </div>
            <div>
                <label>
                    <input type="radio" [(ngModel)]="contract.category" value="非出版單張">
                    單張圖
                </label>
            </div>
        </fieldset>
        <fieldset>
            <legend><h3>出版性委託</h3></legend>
            <div>
                <label>
                    <input type="radio" [(ngModel)]="contract.category" value="出版插圖">
                    插圖
                </label>
            </div>
            <div>
                <label>
                    <input type="radio" [(ngModel)]="contract.category" value="合本">
                    多人合本
                </label>
            </div>
        </fieldset>
    </div>
    <div *ngIf="contract.category">
        {{contract.category}}
        <button (click)="showSetting.category=true">重選</button>
    </div>
</section-->

<section *ngIf="['出版插圖', '合本'].indexOf(contract.category)>-1">
    <h3>是否有商家出資？</h3>
    <label>
        <input type="radio" [(ngModel)]="contract.contributor" value="是">
        是
    </label>
    <label>
        <input type="radio" [(ngModel)]="contract.contributor" value="否">
        否
    </label>
</section>

<section *ngIf="['設定圖', '非出版單張', '出版插圖'].indexOf(contract.category)>-1">
    <h3>工作方式</h3>
    <ul class="radio-list">
        <li>
            <label>
                <input type="radio" [(ngModel)]="contract.workType" value="先收全額">
                先收全額
            </label>
            <ul>
                <li>簽約一開始就要收全額，繪師收到款項之後再動草稿</li>
                <li>契約自收到全部款項後生效</li>
                <li>本選項直接以「完稿」而非「完稿預覽檔案」進行驗收。</li>
            </ul>
        </li>
        <li>
            <label>
                <input type="radio" [(ngModel)]="contract.workType" value="尾款草稿">
                尾款草稿
            </label>
            <ul>
                <li>簽約一開始就要收定金，繪師收到款項之後再動草稿；尾款待草稿確定後再收</li>
                <li>契約自收到全部款項後生效</li>
                <li>本選項直接以「完稿」而非「完稿預覽檔案」進行驗收。</li>
            </ul>
        </li>
        <li>
            <label>
                <input type="radio" [(ngModel)]="contract.workType" value="尾款定稿">
                尾款定稿
            </label>
            <ul>
                <li>簽約一開始就要收定金，繪師收到款項之後再動草稿；尾款待完稿確定後再收</li>
                <li>契約自收到定金後生效</li>
                <li>本選項直接以「完稿預覽檔案」而非「完稿」進行驗收。</li>
            </ul>
        </li>
        <li>
            <label>
                <input type="radio" [(ngModel)]="contract.workType" value="完稿全額">
                完稿全額
            </label>
            <ul>
                <li>確認完稿後一次收全額</li>
                <li>契約自簽約起生效</li>
            </ul>
        </li>
    </ul>

    <ul *ngIf="contract.workType=='先收全額'">
        <li>草稿於<input type="date" [(ngModel)]="contract.draftDeadline"><!--草稿繳交期限-->前繳交給委託主；定稿於<input type="date" [(ngModel)]="contract.finalDeadline"><!--定稿繳交期限-->前繳交給委託主。</li>
        <li>委託主應於簽約後<input type="number" [(ngModel)]="contract.fullPayPeriod" placeholder="付全額期間">日內付全額報酬共新台幣<input type="number" [(ngModel)]="contract.fullPayAmount" placeholder="全額報酬數額">元整給繪師（繪師收到報酬後契約才生效）；違約金數額約定為新台幣<input type="number" [(ngModel)]="contract.penaltyAmount" placeholder="違約金數額">元整。委託主沒有在期限內付清全額報酬，視同契約自始不成立。</li>
        <li>繪師交出草稿後，委託主應於<input type="number" [(ngModel)]="contract.draftFirstOpinionPeriod" placeholder="草稿初次意見期間">日內回應，委託主如果希望大修請於此時限前提出。逾期未回應者視同同意繪師目前的工作方向、放棄提出大修之要求。</li>
        <li>除了上一款的回應以外，委託主還可以在繪師交出草稿後<input type="number" [(ngModel)]="contract.draftFixRequestPeriod" placeholder="草稿開放小修期間">日內（請填寫比定稿繳交期限{{finalDeadline}}更早的時限），跟繪師提出<input type="number" [(ngModel)]="contract.draftFixNumber" placeholder="改稿次數">次的小修要求。繪師接到小修要求後應於<input type="number" [(ngModel)]="contract.draftFixRespondPeriod" placeholder="草稿小修回應期間">日內回應。</li>
        <li>繪師在定稿繳交期限{{finalDeadline}}前交出定稿後給委託主後，委託主應該在<input type="number" [(ngModel)]="contract.acceptPeriod" placeholder="驗收期間" min="1" pattern="\d+">日內通知繪師驗收結果。</li>
    </ul>
    <ul *ngIf="contract.workType=='尾款草稿'">
        <li>草稿於<input type="date" [(ngModel)]="contract.draftDeadline"><!--草稿繳交期限-->前繳交給委託主；定稿於<input type="date" [(ngModel)]="contract.finalDeadline"><!--定稿繳交期限-->前繳交給委託主。</li>
        <li>委託主應於簽約後<input type="number" [(ngModel)]="contract.earnestMoneyPeriod" placeholder="付定金期間">日內付定金共新台幣<input type="number" [(ngModel)]="contract.earnestMoneyAmount" placeholder="定金數額">元整給繪師（繪師收到定金後契約才生效）。委託主沒有在期限內付清全額定金，視同契約自始不成立。</li>
        <li>繪師第一次交出草稿後，委託主應於<input type="number" [(ngModel)]="contract.finalPayPeriod" placeholder="付尾款期間">日內付剩餘報酬共新台幣<input type="number" [(ngModel)]="contract.finalPayAmount" placeholder="尾款數額">元給繪師。委託主沒有在期限內付清尾款視同解約，並且無法收回定金。</li>
        <li>繪師交出草稿後，委託主應於<input type="number" [(ngModel)]="contract.draftFirstOpinionPeriod" placeholder="草稿初次意見期間">日內回應，委託主如果希望大修請於此時限前提出。逾期未回應者視同同意繪師目前的工作方向、放棄提出大修之要求。</li>
        <li>除了上一款的回應以外，委託主還可以在繪師交出草稿後<input type="number" [(ngModel)]="contract.draftFixRequestPeriod" placeholder="草稿開放小修期間">日內（請填寫比定稿繳交期限{{finalDeadline}}更早的時限），跟繪師提出<input type="number" [(ngModel)]="contract.draftFixNumber" placeholder="改稿次數">次的小修要求。繪師接到小修要求後應於<input type="number" [(ngModel)]="contract.draftFixRespondPeriod" placeholder="草稿小修回應期間">日內回應。</li>
        <li>繪師在定稿繳交期限{{finalDeadlinef}}前交出定稿後給委託主後，委託主應該在<input type="number" [(ngModel)]="contract.acceptPeriod" placeholder="驗收期間" min="1" pattern="\d+">日內通知繪師驗收結果。</li>
    </ul>
    <ul *ngIf="contract.workType=='尾款定稿'">
        <li>還沒改寫</li>
    </ul>
    <ul *ngIf="contract.workType=='完稿全額'">
        <li>還沒改寫</li>
    </ul>
</section>

<section *ngIf="contract.workType">
    <h3>雙方資料</h3>
    <section>
        <h4>甲方：繪師</h4>
        <dl>
            <dt>姓名</dt>
            <dd><input [(ngModel)]="contract.a_name"></dd>
            <dt>戶籍地址</dt>
            <dd><input [(ngModel)]="contract.a_permanentAddress"></dd>
            <dt>身分證號</dt>
            <dd><input [(ngModel)]="contract.a_id" pattern="[A-Z]\d{9}"></dd>
            <dt>電子郵件</dt>
            <dd><input [(ngModel)]="contract.a_email" type="email"></dd>
            <dt>通訊地址</dt>
            <dd><input [(ngModel)]="contract.a_correspondenceAddress"></dd>
            <dt>連絡電話</dt>
            <dd><input [(ngModel)]="contract.a_phone"></dd>
        </dl>
    </section>
    <section *ngIf="['出版插圖', '合本'].indexOf(category)> -1 && contract.contributor=='是'">
        <h4>乙方：委託商</h4>
        <dl>
            <dt>商家名稱</dt>
            <dd><input [(ngModel)]="contract.b_name"></dd>
            <dt>登記地址</dt>
            <dd><input [(ngModel)]="contract.b_permanentAddress"></dd>
            <dt>統一編號</dt>
            <dd><input [(ngModel)]="contract.b_id" pattern="\d{8}"></dd>
            <dt>代表人</dt>
            <dd><input [(ngModel)]="contract.b_chairperson"></dd>
            <dt>通訊地址</dt>
            <dd><input [(ngModel)]="contract.b_correspondenceAddress"></dd>
            <dt>聯絡電話</dt>
            <dd><input [(ngModel)]="contract.b_phone"></dd>
        </dl>
    </section>
    <section *ngIf="['出版插圖', '合本'].indexOf(category)==-1 || !contract.contributor">
        <h4>乙方：委託主</h4>
        <dl>
            <dt>姓名</dt>
            <dd><input [(ngModel)]="contract.b_name"></dd>
            <dt>戶籍地址</dt>
            <dd><input [(ngModel)]="contract.b_permanentAddress"></dd>
            <dt>身分證號</dt>
            <dd><input [(ngModel)]="contract.b_id" pattern="[A-Z]\d{9}"></dd>
            <dt>電子郵件</dt>
            <dd><input [(ngModel)]="contract.b_email" type="email"></dd>
            <dt>通訊地址</dt>
            <dd><input [(ngModel)]="contract.b_correspondenceAddress"></dd>
            <dt>連絡電話</dt>
            <dd><input [(ngModel)]="contract.b_phone"></dd>
        </dl>
    </section>
</section>

<section *ngIf="contract.workType">
    <h3>匯款資料：繪師帳戶</h3>
    <dl>
        <dt>銀行名稱-代號</dt>
        <dd><input [(ngModel)]="contract.bank"></dd>
        <dt>戶名</dt>
        <dd><input [(ngModel)]="contract.accountName"></dd>
        <dt>帳號</dt>
        <dd><input [(ngModel)]="contract.accountNumber"></dd>
    </dl>
</section>

<section *ngIf="contract.workType">
    <h3>委託內容</h3>
    <dl>
        <dt>委託名稱</dt>
        <dd><input [(ngModel)]="contract.delegation_name" (change)="terms[0].counter=1"></dd>
        <dt>委託內容</dt>
        <dd><textarea [(ngModel)]="contract.delegation_content" placeholder="對角色和畫面之描述"></textarea></dd>
        <dt>委託規格</dt>
        <dd><textarea [(ngModel)]="contract.delegation_format" placeholder="（本段預設為草稿與完稿為數位檔，紙本或其他實體請額外註明相關規格）完稿的解析度、繳交檔案格式與其他規格；草稿檔案跟完稿預覽檔案的解析度、檔案格式與其他規格；交付以上檔案之方式（上傳網路硬碟讓委託主下載、郵寄隨身碟或光碟等）"></textarea></dd>
        <dt>屬於「重大修改」的類型</dt>
        <dd><textarea [(ngModel)]="contract.seriousityDefinition" placeholder="改骨架，etc."></textarea></dd>
    </dl>
</section>

<hr>
<section>
    <h3>契約內文（還沒好）</h3>

    <section *ngFor="let articleGroup of articleGroups">
        <h4>{{articleGroup.title}}</h4>
        <fieldset style="float: right;">
            <legend>顯示條件</legend>
            {{articleGroup.condition | json}}
        </fieldset>
        <article *ngFor="let article of articleGroup.articles">
            <h6><span></span><span>{{article.title}}</span></h6>
            <p>{{article.content}}</p>
        </article>
    </section>
</section>
